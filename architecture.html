<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture | LipSurf Documentation</title>
    <meta name="description" content="Documentation for developers looking to extend LipSurf using the official API. Create extensions to control your browser via voice or create voice shortcuts for the browser.">
    
    
    <link rel="preload" href="/assets/css/styles.e196d8c2.css" as="style"><link rel="preload" href="/assets/js/app.e196d8c2.js" as="script"><link rel="preload" href="/assets/js/8.203d4c96.js" as="script"><link rel="prefetch" href="/assets/js/4.89929a0d.js"><link rel="prefetch" href="/assets/css/1.styles.94d16ab6.css"><link rel="prefetch" href="/assets/js/1.94d16ab6.js"><link rel="prefetch" href="/assets/css/2.styles.8fe331c9.css"><link rel="prefetch" href="/assets/js/2.8fe331c9.js"><link rel="prefetch" href="/assets/js/3.bc12ccbb.js"><link rel="prefetch" href="/assets/js/5.e5b2740a.js"><link rel="prefetch" href="/assets/js/6.798ab5db.js"><link rel="prefetch" href="/assets/js/7.a1140e97.js"><link rel="prefetch" href="/assets/js/9.e1a03c5a.js"><link rel="prefetch" href="/assets/js/10.a4ee7b7f.js"><link rel="prefetch" href="/assets/js/11.7741ddd3.js"><link rel="prefetch" href="/assets/js/12.2139c1bf.js"><link rel="prefetch" href="/assets/js/13.f5e028d1.js"><link rel="prefetch" href="/assets/js/14.f1a502a7.js"><link rel="prefetch" href="/assets/js/15.634db62c.js"><link rel="prefetch" href="/assets/css/16.styles.3c6e0c98.css"><link rel="prefetch" href="/assets/js/vendors~docsearch.3c6e0c98.js">
    <link rel="stylesheet" href="/assets/css/styles.e196d8c2.css"><link rel="stylesheet" href="/assets/css/1.styles.94d16ab6.css"><link rel="stylesheet" href="/assets/css/2.styles.8fe331c9.css"><link rel="stylesheet" href="/assets/css/16.styles.3c6e0c98.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon-128.png" alt="LipSurf Documentation" class="logo"> <span class="site-name can-hide">LipSurf Documentation</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Basics</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/" class="sidebar-link">Overview</a></li><li><a href="/quick-start.html" class="sidebar-link">5 Minute Quick Start</a></li><li><a href="/architecture.html" class="active sidebar-link">Architecture</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/architecture.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/architecture.html#anatomy" class="sidebar-link">Anatomy</a></li></ul></li><li><a href="/glossary.html" class="sidebar-link">Glossary</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/dynamic-matching.html" class="sidebar-link">Dynamic Match Patterns</a></li><li><a href="/state.html" class="sidebar-link">Sharing Vars. &amp; State</a></li><li><a href="/langs.html" class="sidebar-link">Internationalization</a></li><li><a href="/testing.html" class="sidebar-link">Unit Testing</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Support</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/help.html" class="sidebar-link">Get Help</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>API Reference</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/api-reference/pluginbase.html" class="sidebar-link">PluginBase</a></li><li><a href="/api-reference/command.html" class="sidebar-link">Commands</a></li><li><a href="/api-reference/test.html" class="sidebar-link">Test</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="architecture"><a href="#architecture" aria-hidden="true" class="header-anchor">#</a> Architecture</h1> <h2 id="overview"><a href="#overview" aria-hidden="true" class="header-anchor">#</a> Overview</h2> <p>Every LipSurf <a href="/api-reference/command.html">Command</a> must be a member of a <a href="/api-reference/pluginbase.html">Plugin</a>.</p> <p>The fact that even the primary browser functionality is written as a <em>regular ol'</em> plugin should attest to the power of LipSurf's extensibility.</p> <p>Each website has its idiosyncrasies and many can benefit from custom commands. LipSurf functionality does not begin and end with the what it comes installed with. A subset of plugins come installed by default (plugins for the browser, Google, Reddit etc.) and additional plugins can be installed by users from within the extension. Plugins abstract the commands so they can stay separate from the extensions foundation — evolving fluidly with changing websites.</p> <p>Lastly, of course plugins <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer">can be shared<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> easily with the community or kept private if desired.</p> <h4 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples</h4> <ul><li>If you want to use DuckDuckGo instead of Google, you can write a plugin for that.</li> <li>If you find that annotations are broken on a certain website you frequent, you can submit a PR to upgrade just the browser plugin which is separate from the core codebase.</li> <li>If you want to give users of your own site voice command functionality, you can write a plugin for your site.</li></ul> <div class="tip custom-block"><p class="custom-block-title">NOTE</p> <p>Plugins are usually for a specific site (such as the Google search command for searching when the user says <span class="voice-cmd">Google ...</span>) but they can also be for a specific set of functionality — like making all annotations in kanji so you can save screen space and practice Japanese reading.</p> <p>Plugins should aim to: &quot;Do one thing, and do it well.&quot; ™</p></div> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>Plugins must meet a high minimum standard of quality before being accepted as community plugins for the general public.</p></div> <hr> <h2 id="anatomy"><a href="#anatomy" aria-hidden="true" class="header-anchor">#</a> Anatomy</h2> <p>Plugins are JavaScript objects that extend a <a href="/api-reference/pluginbase.html#pluginbase">PluginBase</a> object and adhere to an <code>IPlugin</code> contract. It is recommended to write in <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to have more confidence that your plugin is implemented correctly.</p> <div class="tip custom-block"><p class="custom-block-title">NOTE</p> <p>All relevant examples will be given in TypeScript.</p></div> <p>Here is an example of a simple, complete plugin:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/// &lt;reference path=&quot;../@types/plugin-interface.d.ts&quot;/&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PluginBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../PluginBase'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">module</span> GmailPlugin <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">let</span> Plugin <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> PluginBase<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        niceName<span class="token punctuation">:</span> <span class="token string">'Gmail'</span><span class="token punctuation">,</span>
        match<span class="token punctuation">:</span> <span class="token regex">/.*gmail.com/</span><span class="token punctuation">,</span>
        commands<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Compose Mail'</span><span class="token punctuation">,</span>
            description<span class="token punctuation">:</span> <span class="token string">'Open the new email composition form in gmail'</span><span class="token punctuation">,</span>
            global<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            match<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'compose mail'</span><span class="token punctuation">,</span> <span class="token string">'write new mail'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            pageFn<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'https://mail.google.com/mail/?view=cm&amp;fs=1'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/lipsurf/plugins/edit/master/docs/architecture.md" target="_blank" rel="noopener noreferrer">Improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last updated: </span> <span class="time">12/5/2018, 4:02:16 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/quick-start.html" class="prev">
          5 Minute Quick Start
        </a></span> <span class="next"><a href="/glossary.html">
          Glossary
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/8.203d4c96.js" defer></script><script src="/assets/js/app.e196d8c2.js" defer></script>
  </body>
</html>
